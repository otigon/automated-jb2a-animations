/*!
 * @pixi/extract - v5.3.11
 * Compiled Mon, 01 Nov 2021 16:10:12 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_extract=function(e,t,r,n){"use strict";var a=new r.Rectangle,i=function(){function e(e){this.renderer=e,e.extract=this}return e.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},e.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},e.prototype.canvas=function(r){var i,o,s,h=this.renderer,d=!1,u=!1;r&&(r instanceof n.RenderTexture?s=r:(s=this.renderer.generateTexture(r),u=!0)),s?(i=s.baseTexture.resolution,o=s.frame,d=!1,h.renderTexture.bind(s)):(i=this.renderer.resolution,d=!0,(o=a).width=this.renderer.width,o.height=this.renderer.height,h.renderTexture.bind(null));var c=Math.floor(o.width*i+1e-4),x=Math.floor(o.height*i+1e-4),l=new t.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=h.gl;v.readPixels(o.x*i,o.y*i,c,x,v.RGBA,v.UNSIGNED_BYTE,g);var I=l.context.getImageData(0,0,c,x);if(e.arrayPostDivide(g,I.data),l.context.putImageData(I,0,0),d){var f=new t.CanvasRenderTarget(l.width,l.height,1);f.context.scale(1,-1),f.context.drawImage(l.canvas,0,-x),l.destroy(),l=f}return u&&s.destroy(!0),l.canvas},e.prototype.pixels=function(t){var r,i,o,s=this.renderer,h=!1;t&&(t instanceof n.RenderTexture?o=t:(o=this.renderer.generateTexture(t),h=!0)),o?(r=o.baseTexture.resolution,i=o.frame,s.renderTexture.bind(o)):(r=s.resolution,(i=a).width=s.width,i.height=s.height,s.renderTexture.bind(null));var d=i.width*r,u=i.height*r,c=new Uint8Array(4*d*u),x=s.gl;return x.readPixels(i.x*r,i.y*r,d,u,x.RGBA,x.UNSIGNED_BYTE,c),h&&o.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},e}();return e.Extract=i,e}({},PIXI.utils,PIXI,PIXI);Object.assign(this.PIXI,_pixi_extract);
//# sourceMappingURL=extract.min.js.map
